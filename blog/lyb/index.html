<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="stylesheet" href="/assets/css/basic.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>留言板 - 夸克博客</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="lyb.css">
    <link rel="icon" href="/assets/img/logo_blue.png" type="image/png">
    <link rel="stylesheet" href="/assets/css/cursor.css">
    <script src="/assets/js/cursor-trail.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://unpkg.com/marked@4.0.0/marked.min.js"></script>
    <script src="/assets/js/nav.js"></script>
</head>

<body class="light-mode">

    <link rel="stylesheet" href="/assets/css/shicha.css">
    <div class="parallax-bg" id="parallaxBg"></div>
    <script src="/assets/js/shicha.js"></script>
    <div class="container">
        <h1 class="page-title">留言板 / Message</h1>
        <header>

            <link rel="stylesheet" href="/assets/css/basic.css">
            <div>

                <a href="/" class="chat-link" target="_blank">
                    返回主页
                </a>
                <a href="/a/chat-room/" class="chat-link" target="_blank">
                    <i class="fas fa-comments"></i>
                    聊天室
                </a>
                <a href="/blog/tieba/" class="chat-link" target="_blank">
                    <i class="fas fa-comments"></i>
                    夸克贴吧
                </a>
            </div>
        </header>

        <div class="admin-panel" id="adminPanel">
            <div class="admin-login" id="adminLoginForm">
                <input type="password" id="adminPassword" placeholder="管理员密码">
                <button class="admin-btn" onclick="adminLogin()">登录</button>
            </div>
            <div class="admin-actions" id="adminActions" style="display: none;">
                <span>管理员模式</span>
                <button class="admin-btn" onclick="logoutAdmin()">退出</button>
            </div>
        </div>

        <div class="message-form">
            <div class="form-group">
                <label for="nickname">昵称</label>
                <input type="text" id="nickname" placeholder="您的昵称">
            </div>

            <div class="avatar-section">
                <div class="avatar-preview" id="avatarPreview">A</div>
                <div class="avatar-options">
                    <div class="avatar-toggle">
                        <button class="toggle-btn active" id="colorToggle">颜色</button>
                        <button class="toggle-btn" id="imageToggle">图片URL</button>
                    </div>
                    <div class="color-picker" id="colorPicker">
                        <div class="color-option selected" style="background: #4a6cf7" onclick="selectColor(this)">
                        </div>
                        <div class="color-option" style="background: #f56565" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #48bb78" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #ed8936" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #9f7aea" onclick="selectColor(this)"></div>
                    </div>
                    <input type="text" id="avatarUrl" placeholder="图片URL (jpg, png, webp)" style="display: none;">
                </div>
            </div>

            <div class="form-group">
                <label for="messageContent">留言内容</label>
                <textarea id="messageContent" rows="4" placeholder="写下您的留言..."></textarea>
            </div>

            <div class="markdown-toggle">
                <input type="checkbox" id="useMarkdown" checked>
                <label for="useMarkdown">使用Markdown格式</label>
            </div>

            <button class="submit-btn" onclick="submitMessage()">发布留言</button>
        </div>

        <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="searchInput" placeholder="搜索留言...">
        </div>

        <div class="messages-container" id="messagesContainer">
            <!-- 留言将通过JavaScript动态加载 -->
        </div>

        <div class="pagination" id="pagination">
            <!-- 分页按钮将通过JavaScript动态生成 -->
        </div>
    </div>

    <!-- 回复模态框 -->
    <div class="modal" id="replyModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">回复留言</div>
                <button class="close-btn" onclick="closeReplyModal()">&times;</button>
            </div>
            <textarea id="replyContent" rows="4" placeholder="写下您的回复..."></textarea>
            <div class="markdown-toggle">
                <input type="checkbox" id="replyUseMarkdown" checked>
                <label for="replyUseMarkdown">使用Markdown格式</label>
            </div>
            <button class="submit-btn" onclick="submitReply()">发布回复</button>
        </div>
    </div>

    <script src="https://api.lsqkk.space/api/firebase-config?v=1"></script>
    <script src="lyb.js"></script>
    <script src="/assets/js/disable-right-click.js"></script>
</body>

</html>