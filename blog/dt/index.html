<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="stylesheet" href="/assets/css/basic.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤¸å…‹åŠ¨æ€ | è“è‰²å¥‡å¤¸å…‹ã®Blog</title>
    <link rel="stylesheet" href="/assets/css/dt.css">

    <link rel="icon" href="/assets/img/logo_blue.png" type="image/png">
    <link rel="stylesheet" href="/assets/css/cursor.css">
    <script src="/assets/js/cursor-trail.js"></script>
    <link rel="stylesheet" href="/assets/css/nav.css">
    <script src="/assets/js/nav.js"></script>
</head>
<style>
    body {
        background: url('/assets/img/bg.png') no-repeat center center fixed;
        background-size: cover;
    }
</style>

<body>
    <div class="dynamic-container">
        <div class="dynamic-header">
            <h1>ç«™ä¸»åŠ¨æ€</h1>
            <p>ä»…æ—¥å¸¸åˆ†äº«ï¼Œå¼€å‘æ—¥å¿—è¯·ç§»æ­¥ â†’ </p><a href="/blog/log" class="back-home">æ›´æ–°æ—¥å¿—</a>
        </div>
        <div id="dynamic-content"></div>
        <a href="/" class="back-home">â† è¿”å›ä¸»é¡µ</a>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/marked/4.0.0/marked.min.js"></script>

    <script>
        marked.setOptions({
            breaks: true,
            gfm: true
        });

        async function loadDynamic() {
            try {
                const response = await fetch('dt.md');
                const mdContent = await response.text();
                const entries = parseDynamicEntries(mdContent);
                renderDynamicEntries(entries);
            } catch (error) {
                document.getElementById('dynamic-content').innerHTML = `
                    <div class="dynamic-card">
                        <h3>åŠ¨æ€åŠ è½½å¤±è´¥</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }

        function parseDynamicEntries(content) {
            // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨#å‰åˆ†å‰²ï¼ˆæ­£å‘å…ˆè¡Œæ–­è¨€ï¼‰
            return content.split(/\n(?=# )/g).map(entry => {
                const [header, ...body] = entry.split('\n');
                const titleMatch = header.match(/^# (.*)/);
                const dateMatch = body.join('\n').match(/## æ—¥æœŸï¼š(.+)/);

                return {
                    title: titleMatch ? titleMatch[1].trim() : 'æœªå‘½ååŠ¨æ€',
                    date: dateMatch ? dateMatch[1].trim() : '',
                    content: body.join('\n').replace(/## æ—¥æœŸï¼š.+\n?/, '').trim()
                };
            }).filter(entry => entry.title).reverse();
        }
        function renderDynamicEntries(entries) {
            const container = document.getElementById('dynamic-content');
            container.innerHTML = entries.map(entry => `
                <div class="dynamic-card">
                    <h2 class="dynamic-title">${entry.title}</h2>
                    ${entry.date ? `<div class="dynamic-date">ğŸ“… ${entry.date}</div>` : ''}
                    <div class="dynamic-content">
                        ${marked.parse(entry.content)}
                    </div>
                </div>
            `).join('');
        }

        window.addEventListener('DOMContentLoaded', loadDynamic);
    </script>
    <script src="/assets/js/disable-right-click.js"></script>
</body>

</html>