<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="stylesheet" href="/assets/css/basic.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>山火预警系统 - 数据与模型双驱动的智慧气象山火防控框架 - 夸克博客</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@7.3.0/ol.css">

    <link rel="icon" href="/assets/img/logo_blue.png" type="image/png">
</head>

<body>
    <div class="container">
        <header>
            <link rel="stylesheet" href="/assets/css/basic.css">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-fire"></i>
                </div>
                <div class="logo-text">
                    <h1>山火预警防控系统</h1>
                    <p>数据与模型双驱动的智慧气象山火防控框架</p>
                </div>
            </div>

            <!-- 新增时间和IP显示 -->
            <div id="time-ip-info" style="color: var(--text-light); text-align: center;">
                <div id="current-time" style="font-size: 16px; font-weight: bold;"></div>
                <div id="current-ip" style="font-size: 12px; color: var(--text-gray);"></div>
            </div>

            <div class="admin-panel">
                <div class="admin-login" id="adminLoginForm">
                    <input type="password" id="adminPassword" placeholder="管理员密码">
                    <button class="admin-btn" onclick="adminLogin()">登录</button>
                </div>
                <div class="admin-actions" id="adminActions" style="display: none;">
                    <span>管理员模式</span>
                    <button class="admin-btn" onclick="logoutAdmin()">退出</button>
                </div>
            </div>
        </header>

        <div class="dashboard-grid">
            <!-- 火险等级卡片 -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        当前火险等级
                    </div>
                </div>
                <div class="data-value" id="fireRiskValue">低风险</div>
                <div class="risk-level">
                    <div class="risk-indicator risk-low"></div>
                    <span>基于当前位置的火险评估</span>
                </div>
                <div style="margin-top: 15px; font-size: 14px; color: var(--text-gray);">
                    <p>安全提示: 当前环境条件良好，无火险隐患</p>
                    <p>建议: 保持常规监测，无需特殊防范措施</p>
                </div>
            </div>

            <!-- 气象数据卡片 -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-temperature-high"></i>
                        </div>
                        实时气象
                    </div>
                    <div id="location" style="font-size: 14px; color: var(--text-gray);">定位中...</div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <div style="font-size: 14px; color: var(--text-gray);">温度</div>
                        <div class="data-value" id="temperature">--<span class="data-unit">°C</span></div>
                    </div>
                    <div>
                        <div style="font-size: 14px; color: var(--text-gray);">湿度</div>
                        <div class="data-value" id="humidity">--<span class="data-unit">%</span></div>
                    </div>
                    <div>
                        <div style="font-size: 14px; color: var(--text-gray);">风速</div>
                        <div class="data-value" id="windSpeed">--<span class="data-unit">m/s</span></div>
                    </div>
                    <div>
                        <div style="font-size: 14px; color: var(--text-gray);">降水</div>
                        <div class="data-value" id="precipitation">--<span class="data-unit">mm</span></div>
                    </div>
                </div>
            </div>

            <!-- 地图卡片 -->
            <div class="dashboard-card card-large">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-map"></i>
                        </div>
                        火情监测地图
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="admin-btn" style="padding: 8px 15px; font-size: 14px;"
                            onclick="switchLayer('satellite')">卫星图</button>
                        <button class="admin-btn" style="padding: 8px 15px; font-size: 14px;"
                            onclick="switchLayer('terrain')">地形图</button>
                    </div>
                </div>
                <div id="map"></div>
            </div>

            <!-- 预警信息卡片 -->
            <div class="dashboard-card card-large">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                        预警信息
                    </div>
                    <button class="admin-btn" id="addWarningBtn"
                        style="display: none; padding: 8px 15px; font-size: 14px;"
                        onclick="showAddWarningModal()">发布预警</button>
                </div>
                <div class="warning-list" id="warningList">
                    <!-- 预警信息将从warnings.json动态加载 -->
                </div>
            </div>

            <!-- 火情上报卡片 -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-fire-extinguisher"></i>
                        </div>
                        火情上报
                    </div>
                </div>
                <p style="margin-bottom: 15px; font-size: 14px;">发现火情请立即上报</p>
                <button class="admin-btn" style="width: 100%;" onclick="location.href='report.html'">上报火情</button>
                <div style="margin-top: 15px; font-size: 14px; color: var(--text-gray);">
                    <p>今日上报: <span id="todayReports">0</span> 起</p>
                    <p>处理中: <span id="pendingReports">0</span> 起</p>
                </div>
            </div>

            <!-- 系统状态卡片 -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        系统状态
                    </div>
                </div>
                <div style="margin: 15px 0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>数据更新</span>
                        <span style="color: var(--accent-green);">正常</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>卫星连接</span>
                        <span style="color: var(--accent-green);">正常</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>预警系统</span>
                        <span style="color: var(--accent-green);">运行中</span>
                    </div>
                </div>
                <div style="font-size: 12px; color: var(--text-gray); text-align: center;">
                    最后更新: <span id="lastUpdate">2023-10-15 16:45:32</span>
                </div>
            </div>
        </div>

        <div class="nav-cards">
            <a href="dashboard.html" class="nav-card">
                <div class="nav-icon">
                    <i class="fas fa-tachometer-alt"></i>
                </div>
                <div class="nav-title">数据仪表盘</div>
                <div class="nav-desc">查看详细数据和统计分析</div>
            </a>

            <a href="satellite.html" class="nav-card">
                <div class="nav-icon">
                    <i class="fas fa-satellite"></i>
                </div>
                <div class="nav-title">卫星监测</div>
                <div class="nav-desc">实时卫星图像与火点识别</div>
            </a>

            <a href="forecast.html" class="nav-card">
                <div class="nav-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="nav-title">火险预报</div>
                <div class="nav-desc">火险等级预测与蔓延</div>
            </a>

            <a href="report.html" class="nav-card">
                <div class="nav-icon">
                    <i class="fas fa-exclamation-circle"></i>
                </div>
                <div class="nav-title">灾情上报</div>
                <div class="nav-desc">上报火情与查看处理进度</div>
            </a>
        </div>
    </div>

    <!-- 添加预警模态框 -->
    <div id="addWarningModal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: var(--primary-blue); padding: 30px; border-radius: 12px; width: 500px; max-width: 90%;">
            <h2 style="margin-bottom: 20px;">发布预警信息</h2>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px;">预警标题</label>
                <input type="text" id="warningTitle"
                    style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid var(--card-border); background: rgba(255,255,255,0.1); color: var(--text-light);">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px;">预警级别</label>
                <select id="warningLevel"
                    style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid var(--card-border); background: rgba(255,255,255,0.1); color: var(--text-light);">
                    <option value="low">低风险</option>
                    <option value="medium">中风险</option>
                    <option value="high">高风险</option>
                    <option value="extreme">极高风险</option>
                </select>
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px;">预警内容</label>
                <textarea id="warningContent" rows="4"
                    style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid var(--card-border); background: rgba(255,255,255,0.1); color: var(--text-light); resize: vertical;"></textarea>
            </div>
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button class="admin-btn" style="background: #666;" onclick="closeAddWarningModal()">取消</button>
                <button class="admin-btn" onclick="addWarning()">发布</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ol@7.3.0/dist/ol.js"></script>
    <script src="https://api.lsqkk.space/api/tianditu-key"></script>
    <script src="index.js"></script>
</body>
<script src="/assets/js/disable-right-click.js"></script>
<script src="/assets/js/no-text.js"></script>

</html>