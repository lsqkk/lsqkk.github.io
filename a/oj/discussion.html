<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â§∏ÂÖãÂçöÂÆ¢ OJ - ËÆ®ËÆ∫Âå∫</title>
    <link rel="stylesheet" href="/css/basic.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="discussion.css">

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://unpkg.com/marked@4.0.0/marked.min.js"></script>
</head>

<body>
    <div class="header-placeholder"></div>

    <div class="oj-app-wrapper">
        <aside class="oj-sidebar-panel glass-card">
            <h2 class="oj-sidebar-title">Â§∏ÂÖã OJ</h2>
            <nav class="oj-sidebar-nav">
                <ul>
                    <li><a href="index.html" class="oj-nav-link">È¶ñÈ°µ | È¢òÁõÆ</a></li>
                    <li><a href="problem-list.html" class="oj-nav-link">È¢òÂ∫ì</a></li>
                    <li><a href="discussion.html" class="oj-nav-link active">ËÆ®ËÆ∫Âå∫</a></li>
                    <li><a href="submission-record.html" class="oj-nav-link">Êèê‰∫§ËÆ∞ÂΩï</a></li>
                </ul>
            </nav>
            <hr class="oj-sidebar-divider">
            <div class="oj-sidebar-controls">
                <div class="oj-search-group">
                    <input type="text" id="discussionSearchInput" class="oj-search-input" placeholder="ÊêúÁ¥¢‰∏ªÈ¢ò/È¢òÁõÆID">
                    <button id="discussionSearchButton" class="oj-search-button">üîç</button>
                </div>
            </div>

            <div class="oj-sidebar-controls" id="admin-login-area">
                <input type="password" id="adminPassword" class="oj-search-input" placeholder="ÁÆ°ÁêÜÂëòÂØÜÁ†Å">
                <button class="submit-btn" onclick="adminLogin()">ÁôªÂΩï</button>
            </div>
        </aside>

        <main class="oj-main-content">
            <div id="listView" class="view active">
                <section id="newDiscussionForm" class="new-post-form glass-card">
                    <h3><i class="fas fa-edit"></i> ÂèëËµ∑Êñ∞ËÆ®ËÆ∫</h3>

                    <div class="form-compact-row row-nickname-avatar">
                        <div class="form-group form-nickname">
                            <label for="nickname">ÊÇ®ÁöÑÊòµÁß∞</label>
                            <input type="text" id="nickname" placeholder="ÊòµÁß∞">
                        </div>

                        <div class="form-group form-avatar-controls">
                            <label>Â§¥ÂÉèËÆæÁΩÆ</label>
                            <div class="avatar-selection-area">
                                <div class="avatar-preview" id="avatarPreview" style="background-color: #5C6BC0;">A
                                </div>
                                <div class="avatar-toggle">
                                    <button id="color-toggle" class="active">È¢úËâ≤</button>
                                    <button id="image-toggle">URL</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="avatar-input-container">
                        <div id="color-selector" class="avatar-selector active">
                            <input type="color" id="colorPicker" value="#5C6BC0">
                        </div>

                        <div id="image-selector" class="avatar-selector">
                            <input type="text" id="avatarUrl"
                                placeholder="ËæìÂÖ•ÂõæÁâá URL (‰æãÂ¶Ç: https://example.com/avatar.jpg)">

                        </div>
                    </div>

                    <div class="form-compact-row row-title-id">
                        <div class="form-group problem-id-group">
                            <label for="newDiscussionProblemId">È¢òÁõÆ ID</label>
                            <input type="number" id="newDiscussionProblemId" placeholder="Â¶Ç: 1001" value="1001">
                        </div>
                        <div class="form-group discussion-title-group">
                            <label for="newDiscussionTitle">ËÆ®ËÆ∫‰∏ªÈ¢ò</label>
                            <input type="text" id="newDiscussionTitle" placeholder="ËØ∑ËæìÂÖ•‰∏ªÈ¢ò">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="newDiscussionContent">ÂÜÖÂÆπ (Markdown)</label>
                        <textarea id="newDiscussionContent" rows="4" placeholder="ÊîØÊåÅ Markdown Ê†ºÂºè..."></textarea>
                    </div>

                    <div class="form-submit-row">
                        <button class="submit-btn" onclick="submitNewDiscussion()">ÂèëÂ∏ÉËÆ®ËÆ∫</button>
                    </div>
                </section>

                <section class="discussions-list-section">
                    <h2>ÊâÄÊúâËÆ®ËÆ∫Â∏ñ</h2>
                    <div class="discussions-container" id="discussionsContainer">
                        <!-- ËÆ®ËÆ∫Â∏ñÂ∞ÜÁî±JavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
                    </div>

                    <div class="pagination" id="pagination">
                        <!-- ÂàÜÈ°µÂ∞ÜÁî±JavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </section>
            </div>

            <div id="detailView" class="view" style="display:none;">
                <button class="back-to-list-btn" onclick="showListView()">
                    <i class="fas fa-arrow-left"></i> ËøîÂõûËÆ®ËÆ∫ÂàóË°®
                </button>

                <div id="singleDiscussionContent" class="discussion-detail-card">
                    <!-- Âçï‰∏™ËÆ®ËÆ∫ËØ¶ÊÉÖÂ∞ÜÁî±JavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
                </div>
            </div>
        </main>
    </div>

    <script src="/js/nav.js"></script>
    <script src="./js/discussion.js"></script>
</body>

</html>