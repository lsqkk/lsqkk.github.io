<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>æ–‡ç«  - å¤¸å…‹åšå®¢</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/cursor.css">
    <link rel="stylesheet" href="css/post.css">
    <script src="js/cursor-trail.js"></script>
    <link rel="icon" href="image/logo_blue.png" type="image/png">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>

<body
    style=" background: url('image/star.gif') no-repeat center center; background-size: cover; position: relative; background-attachment: fixed;">

    <div class="sidebar">
        <div class="sidebar-toggle" onclick="toggleSidebar()">â˜°</div>
        <div class="sidebar-content" id="sidebarContent">
            <div id="toc-loading" style="display: none;">ç›®å½•åŠ è½½ä¸­...</div>
            <div class="sidebar-main-content"></div>
            <div class="sidebar-footer">
                <a href="index.html" style="text-decoration: none;">åšå®¢ä¸»é¡µ</a>
                <a href="article-list.html" style="text-decoration: none;">æ–‡ç« </a>
                <a href="games" style="text-decoration: none;">å¤¸å…‹æ¸¸æˆ</a>
                <a href="ds" style="text-decoration: none;">DeepSeekæ»¡è¡€ç‰ˆ</a>
                <a href="tool.html" style="text-decoration: none;">æ›´å¤šå·¥å…·</a>
            </div>
        </div>
    </div>

    <div class="header-placeholder"></div>
    <div class="header">
        <div class="header-content">
            <a href="https://lsqkk.github.io" style="color: white; text-decoration: none;">
                <h1>å¤¸å…‹åšå®¢</h1>
            </a>
            <div class="header-nav-container">
                <ul class="header-nav">
                    <li><a href="article-list.html">æ–‡ç« </a></li>
                    <li><a href="tool.html">å·¥å…·</a></li>
                    <li><a href="games">æ¸¸æˆ</a></li>
                    <li><a href="daily">æ—¥æŠ¥</a></li>
                    <li><a href="qtv">è§†é¢‘</a></li>
                    <li><a href="https://xoyondo.com/mb/ytz1td6p1e8vfzs" target="blank">ç•™è¨€</a></li>
                </ul>
            </div>
            <span class="mode-toggle" onclick="toggleMode()">ğŸŒ™</span>
        </div>
    </div>

    <div class="nav">
        <ul class="mobile-nav">
            <li><a href="article-list.html">æ–‡ç« </a></li>
            <li><a href="tool.html">å·¥å…·</a></li>
            <li><a href="games">æ¸¸æˆ</a></li>
            <li><a href="daily">æ—¥æŠ¥</a></li>
            <li><a href="qtv">è§†é¢‘</a></li>
            <li><a href="https://xoyondo.com/mb/ytz1td6p1e8vfzs" target="blank">ç•™è¨€</a></li>
        </ul>
    </div>



    <div class="morenpost" style="box-shadow: 0 0 10px 10px rgba(255,255,255,0.3); margin:20px;">
        <a href="post.html?file=about.md"><img src="image/touxiang.png" alt="å¤´åƒ"
                style="width: 15px; border-radius: 50%; box-shadow: 0 0 3px rgba(0,0,0,0.5); overflow: hidden; "></a>
        <div style="color: #333333; margin-bottom: 15px; font-size: 0.9em; display: inline;">æ–‡ / è“è‰²å¥‡å¤¸å…‹ /</div>
        <div id="post-date" style="color: #333333; margin-bottom: 15px; font-size: 0.9em; display: inline;"></div>
        <img src="https://i.postimg.cc/Qtp0507J/R-C.png" alt="æµè§ˆé‡" style="width: 15px; display: inline;">
        <div style="color: #333333; margin-bottom: 15px; font-size: 0.9em; display: inline;"><span
                id="busuanzi_value_page_pv"></span></div>
        <div id="content" class="post-content"></div>
        <hr>

        <div>
            <center>
                <link rel="stylesheet"
                    href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                <div class="social-share" data-sites="weibo, qq, qzone,wechat"></div>
                <script src="https://apps.bdimg.com/libs/jquery/1.8.2/jquery.js"></script>
                <script
                    src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
            </center>
        </div>
        <div style="margin-top: 20px;">
            <button class="share-button" onclick="copyLink()">åˆ†äº«æœ¬æ–‡é“¾æ¥</button>
            <span id="copy-notice" style="color: #666; margin-left: 10px; display: none;">é“¾æ¥å·²å¤åˆ¶ï¼</span>
        </div>
    </div>

    <!-- è¯„è®ºåŒºåŸŸ -->
    <div class="morenpost" style="margin:0px 20px 20px 20px;">
        <div class="giscus"></div>
    </div>

    <div class="morenpost" style="margin:0px 20px 10px 20px;"><a href="post.html?file=copyright.md"
            style="text-decoration: none; color: black; ">Â© 2025 å¤¸å…‹åšå®¢ All rights reserved.</a></div>


    <script src="https://giscus.app/client.js" data-repo="lsqkk/lsqkk.github.io" data-repo-id="R_kgDONya5nQ"
        data-category="Announcements" data-category-id="DIC_kwDONya5nc4CnVr4" data-mapping="url" data-strict="0"
        data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme"
        data-lang="zh-CN" crossorigin="anonymous" async>
        </script>

    <!-- ä¾èµ–åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <script>
        // è·å–å½“å‰é¡µé¢çš„ file å‚æ•°
        function getFileNameFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('file') || '';
        }

        // ä» JSON æ•°æ®ä¸­æŸ¥æ‰¾æ–‡ç« æ ‡é¢˜
        async function fetchPostTitle() {
            const fileName = getFileNameFromURL(); // è·å–æ–‡ä»¶å
            if (!fileName) return;

            try {
                // åŠ è½½ posts.json æ–‡ä»¶
                const response = await fetch('json/posts.json');
                const posts = await response.json();

                // æŸ¥æ‰¾å½“å‰æ–‡ç« çš„æ ‡é¢˜
                const post = posts.find(p => p.file === fileName);
                if (post) {
                    document.title = `${post.title} - å¤¸å…‹åšå®¢`; // è®¾ç½®é¡µé¢æ ‡é¢˜
                } else {
                    document.title = `æ–‡ç« æœªæ‰¾åˆ° - å¤¸å…‹åšå®¢`; // å¦‚æœæœªæ‰¾åˆ°æ–‡ç« 
                }
            } catch (error) {
                console.error('åŠ è½½ JSON æ•°æ®å¤±è´¥:', error);
                document.title = `å¤¸å…‹åšå®¢`;
            }
        }

        window.onload = fetchPostTitle;
    </script>

    <script>
        // è·å–URLå‚æ•°
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // è‡ªå®šä¹‰Markdownæ¸²æŸ“å™¨ä»¥ä¿ç•™TeX
        const renderer = {
            code(code, infostring) {
                if (infostring === 'math') {
                    return `<div class="math-block">${code}</div>`;
                }
                return false; // ä½¿ç”¨é»˜è®¤æ¸²æŸ“
            }
        };
        marked.use({ renderer });

        // åŠ è½½æ–‡ç« å†…å®¹
        async function loadPost() {
            const filename = getQueryParam('file');
            if (!filename) {
                document.getElementById('content').innerHTML = '<p>æ–‡ç« æœªæ‰¾åˆ°</p>';
                return;
            }

            try {
                const postsData = await fetch('json/posts.json').then(r => r.json());
                const post = postsData.find(p => p.file === filename);
                if (post) {
                    // æ˜¾ç¤ºæ—¥æœŸ
                    const dateElement = document.getElementById('post-date');
                    dateElement.textContent = `å‘è¡¨äº ${post.date}`;
                } else {
                    console.warn('æœªæ‰¾åˆ°æ–‡ç« ä¿¡æ¯');
                }

                const mdContent = await fetch(`/posts/${filename}`).then(r => r.text());
                const htmlContent = marked.parse(mdContent);
                document.getElementById('content').innerHTML = htmlContent;


                // æ¸²æŸ“æ•°å­¦å…¬å¼
                renderMathInElement(document.getElementById('content'), {
                    delimiters: [
                        { left: '$$', right: '$$', display: true },
                        { left: '$', right: '$', display: false }
                    ],
                    throwOnError: false
                });

                generateTOC();
                addPostNavigation(filename);

            } catch (error) {
                document.getElementById('content').innerHTML = '<p>åŠ è½½æ–‡ç« å¤±è´¥</p>';
            }
        }

        // å¤åˆ¶é“¾æ¥åŠŸèƒ½
        function copyLink() {
            const currentURL = window.location.href;
            navigator.clipboard.writeText(currentURL).then(() => {
                const notice = document.getElementById('copy-notice');
                notice.style.display = 'inline';
                setTimeout(() => notice.style.display = 'none', 2000);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
            });
        }

        // åˆ‡æ¢é»‘æš—/ç™½å¤©æ¨¡å¼
        function toggleMode() {
            const body = document.body;
            const modeToggle = document.querySelector('.mode-toggle');
            const isDarkMode = body.style.backgroundImage.includes('image/star.gif');

            if (isDarkMode) {
                body.style.backgroundImage = "url('image/light.gif')";
                modeToggle.innerText = 'â˜€ï¸';
            } else {
                body.style.backgroundImage = "url('image/star.gif')";
                modeToggle.innerText = 'ğŸŒ™';
            }
        }
        // ç”Ÿæˆç›®å½•
        function generateTOC() {
            const headings = document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3');
            const tocContainer = document.querySelector('.sidebar-main-content');
            let html = '<h4>ç›®å½•</h4>';

            headings.forEach((heading, index) => {
                const level = heading.tagName.toLowerCase();
                const id = `heading-${index}`;
                heading.id = id;

                html += `
            <div class="toc-item ${level}">
                <a href="#${id}">${heading.textContent}</a>
            </div>
        `;
            });

            html += `
        <div style="margin-top: 20px;">
            <a id="prevPost" class="nav-arrow" style="cursor:pointer;margin-right:15px;">â† å‰ä¸€ç¯‡</a>
            <a id="nextPost" class="nav-arrow" style="cursor:pointer;">åä¸€ç¯‡ â†’</a>
        </div>
    `;

            tocContainer.innerHTML = html;
        }

        // åˆ‡æ¢ä¾§æ 
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('active');
        }

        async function addPostNavigation(currentFile) {
            const posts = await fetch('json/posts.json').then(r => r.json());
            const currentIndex = posts.findIndex(p => p.file === currentFile);

            const prevPost = posts[currentIndex + 1]; // å› ä¸ºæ–‡ç« æ˜¯æŒ‰æ—¶é—´å€’åºæ’åˆ—
            const nextPost = posts[currentIndex - 1];

            const prevBtn = document.getElementById('prevPost');
            const nextBtn = document.getElementById('nextPost');

            if (prevPost) {
                prevBtn.innerHTML = `â† ${prevPost.title}`;
                prevBtn.href = `post.html?file=${prevPost.file}`;
            } else {
                prevBtn.style.display = 'none';
            }

            if (nextPost) {
                nextBtn.innerHTML = `${nextPost.title} â†’`;
                nextBtn.href = `post.html?file=${nextPost.file}`;
            } else {
                nextBtn.style.display = 'none';
            }
        }


        // åˆå§‹åŒ–åŠ è½½
        document.addEventListener('DOMContentLoaded', () => {
            loadPost().then(() => {
                document.getElementById('sidebarContent').style.opacity = 1;
            });
        });
    </script>

</body>

</html>