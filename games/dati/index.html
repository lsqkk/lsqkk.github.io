<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="stylesheet" href="/assets/css/basic.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知识答题 | 基于本站 Quiz API 的趣味答题与对战 - 夸克博客</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/room.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="icon" href="/assets/img/logo_blue.png" type="image/png">
    <link rel="stylesheet" href="/assets/css/cursor.css">
    <script src="/assets/js/cursor-trail.js"></script>
    <link rel="stylesheet" href="dati.css">
</head>

<body class="dark-mode">
    <div class="app-container">
        <!-- 侧边栏 -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">答题房间</div>
                <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>
            </div>

            <div class="room-list" id="roomList">
                <div class="empty-state">
                    <div class="empty-icon"><i class="fas fa-question-circle"></i></div>
                    <p>暂无房间记录</p>
                </div>
            </div>

            <div class="join-room-container">
                <input type="text" class="join-room-input" id="roomInput" placeholder="输入房间号">
                <button class="join-room-btn" onclick="joinRoom()">加入房间</button>
            </div>
        </div>

        <!-- 主内容区 -->
        <div class="main-content">
            <div class="game-header">
                <button class="mobile-menu-btn" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
                <div class="game-title" id="currentRoomTitle">每日知识挑战</div>
                <div style="width: 40px;"></div>
            </div>

            <div class="game-container" id="gameContainer">
                <!-- 个人答题模式 -->
                <div class="profile-setup" id="profileSetup">
                    <div class="profile-title">设置您的个人资料</div>
                    <input type="text" class="profile-input" id="nicknameInput" placeholder="您的昵称">
                    <div class="color-picker" id="colorPicker">
                        <div class="color-option" style="background: #40E0D0" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #FF6B6B" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #7B68EE" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #FFD700" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #C7EDCC" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #FAF9DE" onclick="selectColor(this)"></div>
                        <div class="color-option" style="background: #FFF2E2" onclick="selectColor(this)"></div>
                    </div>
                    <div class="role-selection">
                        <button class="role-btn selected" onclick="selectMode('solo')"><i class="fas fa-user"></i>
                            个人模式</button>
                        <button class="role-btn" onclick="selectMode('player1')"><i class="fas fa-gamepad"></i>
                            玩家1</button>
                        <button class="role-btn" onclick="selectMode('player2')"><i class="fas fa-gamepad"></i>
                            玩家2</button>
                        <button class="role-btn" onclick="selectMode('spectator')"><i class="fas fa-eye"></i>
                            观众</button>
                    </div>
                    <button class="profile-save-btn" onclick="saveProfile()">保存并开始</button>
                </div>

                <!-- 个人答题内容 -->
                <div id="soloContent" style="display:none;">
                    <div class="question-container">
                        <div id="question"></div>
                        <div class="options" id="options"></div>
                        <button onclick="submitAnswer()" id="submitBtn" disabled>提交答案</button>
                        <div id="resultMessage" class="result-message"></div>
                        <div id="stats"></div>
                    </div>
                </div>

                <!-- 对战模式内容 -->
                <div id="battleContent" style="display:none;">
                    <div class="players-info">
                        <div class="player" id="player1">
                            <div class="player-avatar">P1</div>
                            <div>
                                <div class="player-name">等待玩家1...</div>
                                <div class="player-role">玩家1</div>
                            </div>
                        </div>
                        <div class="player" id="player2">
                            <div class="player-avatar">P2</div>
                            <div>
                                <div class="player-name">等待玩家2...</div>
                                <div class="player-role">玩家2</div>
                            </div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="score" id="score1">0</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress1"></div>
                        </div>
                        <div>VS</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress2"></div>
                        </div>
                        <div class="score" id="score2">0</div>
                    </div>

                    <div class="question-container">
                        <div class="timer" id="timer">10</div>
                        <div id="battleQuestion"></div>
                        <div class="options" id="battleOptions"></div>
                        <div class="game-status" id="battleStatus"></div>
                    </div>

                    <button class="restart-btn" id="restartBtn" style="display:none;"
                        onclick="requestRestart()">重新开始</button>
                </div>
            </div>
        </div>
    </div>

    <div id="winnerOverlay" class="winner-overlay" style="display:none;">
        <div class="winner-box">
            <div class="winner-text">胜利者: <span class="winner-name" id="winnerName"></span></div>
            <button class="restart-btn" onclick="requestRestart()">再来一局</button>
        </div>
    </div>

    <script src="https://api.130923.xyz/api/firebase-config?v=1"></script>
    <script src="dati.js"></script>
    <script src="/assets/js/disable-right-click.js"></script>
</body>

</html>